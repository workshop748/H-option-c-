using System.IO;
using System.Linq.Expressions;
namespace Malware
{
    public class Graph
    {
        
        public static async Task<List<Edge>> BFSAsync(string spaths)
        {
            var results = new List<Edge>();
            var directories = new Queue<string>();
            directories.Enqueue(spaths);
            while (directories.Count > 0)
            {
                string path = directories.Dequeue();
                var dir = new DirectoryInfo(path);
                try { 
                FileSystemInfo[] infos = dir.GetFileSystemInfos();

                    foreach (FileSystemInfo info in infos)
                    {
                        if (info is DirectoryInfo)
                        {
                            directories.Enqueue(info.FullName);
                        }
                        else if (info is FileInfo)
                        {
                            Edge temp = new Edge(info.Name, info.FullName);
                            results.Add(temp);
                        }

                    }
                    
                  
                }catch(Exception e)
                {

                }
            }
            
            return results;
        }

        


    }
}
